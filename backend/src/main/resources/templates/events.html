<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::main})}">

<body>
    <main>
        <section style="padding: 60px 0;" class="animate-fade">
            <div class="container">
                <div style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 2rem;">
                    <div>
                        <h1 style="font-size: 2.5rem; margin-bottom: 0.5rem;">Etkinlikler</h1>
                        <p style="color: #94a3b8;">Ãœniversitendeki en son etkinlikleri takip et.</p>
                    </div>
                    <form action="/events" method="get" style="display: flex; gap: 1rem;">
                        <input type="text" name="search" th:value="${searchQuery}" placeholder="Etkinlik ara..."
                            style="background: var(--glass); border: 1px solid var(--glass-border); padding: 0.6rem 1rem; border-radius: 8px; color: white;">
                        <button type="submit"
                            style="background: var(--primary); color: white; border: none; padding: 0.6rem 1rem; border-radius: 8px; cursor: pointer;">Ara</button>
                        <a th:if="${searchQuery}" href="/events"
                            style="display: flex; align-items: center; justify-content: center; background: rgba(255, 255, 255, 0.1); color: white; border: none; padding: 0.6rem; border-radius: 8px; cursor: pointer; text-decoration: none;">âœ•</a>
                    </form>
                </div>

                <div class="event-grid">

                    <!-- Recommendations Section -->
                    <div th:if="${not #lists.isEmpty(recommendedEvents)}"
                        style="grid-column: 1 / -1; margin-bottom: 2rem;">
                        <h2
                            style="font-size: 1.8rem; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                            âœ¨ Sizin Ä°Ã§in Ã–nerilenler
                        </h2>
                        <div class="event-grid">
                            <div th:each="re : ${recommendedEvents}" class="event-card"
                                style="border: 1px solid var(--primary); background: rgba(var(--primary-rgb), 0.05);">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px;">
                                    <span class="event-badge" th:text="${re.eventType}"
                                        style="background: var(--primary);">Konferans</span>
                                    <span style="font-weight: bold; color: var(--primary); font-size: 0.9rem;">
                                        %<span th:text="${#numbers.formatInteger(re.totalScore * 100, 0)}">95</span>
                                        EÅŸleÅŸme
                                    </span>
                                </div>
                                <h3 th:text="${re.title}">BaÅŸlÄ±k</h3>
                                <p th:text="${re.explanation}"
                                    style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 1rem; font-style: italic;">
                                    AÃ§Ä±klama...
                                </p>
                                <div class="event-meta">
                                    <span th:text="${re.eventDate}">Tarih</span>
                                </div>
                                <a th:href="@{/events/{id}(id=${re.eventId})}" class="btn"
                                    style="width: 100%; margin-top: 1rem; background: var(--primary);">Ä°ncele</a>
                            </div>
                        </div>
                        <hr style="border: 0; border-top: 1px solid var(--glass-border); margin: 3rem 0;">
                    </div>

                    <div th:each="ae : ${events}" class="event-card">
                        <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px;">
                            <span class="event-badge" th:text="${ae.eventType}">Konferans</span>
                            <span th:if="${ae.clubName}" class="event-badge"
                                style="background: rgba(99, 102, 241, 0.2); color: #6366f1;">
                                ğŸ›ï¸ <span th:text="${ae.clubName}">KulÃ¼p</span>
                            </span>
                        </div>
                        <h3 th:text="${ae.title}">Etkinlik BaÅŸlÄ±ÄŸÄ±</h3>
                        <p th:text="${ae.description}"
                            style="color: #94a3b8; font-size: 0.875rem; margin-bottom: 1.5rem; display: -webkit-box; -webkit-line-clamp: 2; line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                            Etkinlik aÃ§Ä±klamasÄ± burada yer alacak ve iki satÄ±rla sÄ±nÄ±rlÄ± kalacaktÄ±r.
                        </p>
                        <div class="event-meta">
                            <span th:text="${ae.eventDate}">12.03.2026</span>
                            <span th:text="${ae.startTime}">14:00</span>
                            <span th:if="${ae.price != null and ae.price > 0}"
                                style="background: linear-gradient(135deg, #a855f7, #ec4899); padding: 4px 10px; border-radius: 12px; font-weight: 700; font-size: 0.8rem;">
                                â‚º<span th:text="${#numbers.formatDecimal(ae.price, 1, 2)}">50.00</span>
                            </span>
                            <span th:if="${ae.price == null or ae.price == 0}"
                                style="background: linear-gradient(135deg, #10b981, #059669); padding: 4px 10px; border-radius: 12px; font-weight: 700; font-size: 0.8rem;">
                                ÃœCRETSÄ°Z
                            </span>
                        </div>
                        <a th:href="@{/events/{id}(id=${ae.id})}" class="btn"
                            style="width: 100%; margin-top: 1.5rem; text-align: center; border: 1px solid var(--glass-border); display: block;">DetaylarÄ±
                            GÃ¶r</a>
                    </div>

                    <!-- Empty state if no events -->
                    <div th:if="${#lists.isEmpty(events)}"
                        style="grid-column: 1 / -1; text-align: center; padding: 4rem;">
                        <p style="color: #94a3b8;">HenÃ¼z hiÃ§ etkinlik bulunmuyor.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>
</body>

</html>